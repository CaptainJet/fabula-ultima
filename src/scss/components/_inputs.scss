@use '../common/vars.scss' as *;
@use '../common/mixins' as mixins;

input[type='number'],
input[type='text'],
select,
textarea {
  width: 100%;
  width: stretch;

  min-height: 2.5rem;

  color: var(--input-color);
  background: transparent;

  padding-inline-start: 4px;
  padding-block: 1px;

  border: 2px solid var(--input-border-color);
  border-radius: 4px;

  align-self: normal;

  @include mixins.text-base-400;

  &:active,
  &:hover,
  &:focus {
    outline: transparent;

    background-color: var(--input-background-color-active);
    color: var(--input-color-active);
    border-color: var(--input-border-color-active);
  }

  &::placeholder {
    color: gray;
  }
}

input[type='checkbox'] {
  width: 2.5rem;
  height: 2.5rem;

  color: var(--input-color);
  background: transparent;

  padding-inline-start: 4px;
  padding-block: 1px;

  border: 2px solid var(--input-border-color);
  border-radius: 4px;

  align-self: normal;

  @include mixins.text-base-400;

  &:active,
  &:hover,
  &:focus,
  &:checked {
    outline: transparent;

    background-color: var(--input-background-color-active);
    color: var(--input-color-active);
    border-color: var(--input-border-color-active);
  }
}

.chimera-input {
  display: flex;
  flex-direction: column;
  gap: 4px;

  width: 100%;
  width: stretch;

  &--column {
    flex-direction: row;
  }

  &--flex-row {
    flex-direction: row;
    .chimera-input__label {
      align-self: center;
    }
  }

  &--center {
    .chimera-input__label,
    .chimera-input__field {
      text-align: center;
    }
  }

  &--small {
    .chimera-input__field {
      width: 5rem;
      align-self: center;
      text-align: center;
    }
  }

  &__label {
    @include mixins.text-sm-700-fabula;
  }
  &__field {
    &[type='number'] {
      text-align: center;
    }
  }
}

.chimera-value {
  &--bullet {
    &::before {
      content: '✦';
      @include mixins.text-base-400;
    }
  }

  &__label {
    @include mixins.text-base-700;
    margin-inline-end: 4px;
  }
  &__value {
    @include mixins.text-base-400;
  }
}

// span {
//   &--bold {
//     font-weight: 700;
//   }
// }

// input[type='number'],
// input[type='text'],
// select,
// textarea {
//   width: 100%;
//   width: stretch;
//   height: var(--input-component-size);

//   background-color: var(--input-background);
//   border-bottom: var(--input-border);

//   font-family: var(--input-font-stack);
//   font-size: var(--input-font-size);
//   color: var(--input-color);

//   transition:
//     background-color 0.2s ease-in,
//     color 0.2s ease-in,
//     border 0.2s ease-in,
//     padding 0.2s ease-in;

//   padding-inline-start: var(--p-sm);
//   padding-block: 1px;

//   &:active,
//   &:hover,
//   &:focus {
//     outline: transparent;

//     background-color: var(--input-background-color-active);
//     color: var(--input-color-active);
//     border-bottom: var(--input-border-active);
//   }

//   &:active {
//     border-width: 2px;
//   }

//   &::placeholder {
//     color: gray;
//   }
// }

// select {
//   // appearance: none;

//   // background-image: url('https://www.svgrepo.com/show/471164/chevron-down.svg');
//   // background-position: 100% 50%;
//   // background-repeat: no-repeat;
//   // background-size: contain;

//   option {
//     background: var(--input-background);
//     // background-color: red;
//     color: var(--input-color);

//     font-family: var(--input-font-stack);
//     font-size: var(--input-font-size);
//   }
// }

input[type='number'] {
  text-align: center;
  &[disabled],
  &[readonly] {
    cursor: default;

    background: var(--input-background-disabled);
    color: var(--input-color-disabled);

    border-color: var(--input-border-disabled);
  }
}

textarea {
  max-height: 10rem;
  resize: vertical;

  scrollbar-width: thin;
  // scrollbar-color: var(--input-color-active transparent);

  @supports selector(::-webkit-scrollbar) {
    &::-webkit-scrollbar {
      width: 0.5rem;
      background: transparent;
    }

    &::-webkit-scrollbar-track {
      background: var(--input-color-active);
    }
  }
}

span {
  &--bold {
    font-weight: 700;
  }
}

span[name] {
  white-space: pre-wrap;
  // &:empty {
  //   text-align: center;
  //   &:before {
  //     display: inline;
  //     content: '—';
  //   }
  // }
}

// label {
//   input[type='checkbox'] + span {
//     margin-inline-start: var(--m-sm);
//     vertical-align: middle;
//   }
// }

.chimera-switch {
  &__group {
    display: flex;
    flex-wrap: nowrap;
    gap: 4px;
    justify-content: center;
  }
  &__label {
    &:has(:checked) {
      background: var(--input-background-color-active);
      img,
      svg {
        filter: none;
      }
    }

    position: relative;
    display: flex;
    cursor: pointer;

    align-items: center;
    justify-content: center;

    width: 30px;
    height: 30px;
    aspect-ratio: 1;

    color: var(--input-color);
    background: transparent;

    border: 2px solid var(--input-border-color);
    border-radius: 4px;

    @include mixins.text-base-400;

    &:active,
    &:hover,
    &:focus {
      outline: transparent;

      // background-color: var(--input-background-color-active);
      color: var(--input-color-active);
      border-color: var(--input-border-color-active);
    }

    img,
    svg {
      width: 20px;
      height: 20px;
      aspect-ratio: 1;

      filter: invert(0.5);
    }

    input[type='radio'] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;

      //   &:checked + img,
      //   &:checked + svg {
      //     background-color: red;
      //   }
    }

    span {
      @include mixins.sr-only;
    }
  }
}

// .chimera-background-image {
//   background-repeat: no-repeat;
//   background-size: contain;
//   &--melee {
//     @extend .chimera-background-image;
//     background-image: url('https://raw.githubusercontent.com/morgdalaine/fabula-ultima/main/assets/melee.svg');
//   }
//   &--ranged {
//     @extend .chimera-background-image;
//     background-image: url('https://raw.githubusercontent.com/morgdalaine/fabula-ultima/main/assets/ranged.svg');
//   }
// }

.chimera-repeater {
  &__empty {
    background-color: hsl(random(360) 80% 80% / 80%);
    padding: 8px;
  }
  &__empty-header {
    @include mixins.text-lg-700;
  }
  &__empty-subtitle {
    @include mixins.text-sm-400;
  }
}

.fabula-check {
  position: relative;
  display: flex;
  gap: 4px;

  span {
    &:first-of-type {
      // margin: 0px 2.4px 0px -8px;
      color: blue;
    }
    &:last-of-type {
      color: red;
      // margin: 0px -5.6px 0px 0px;
    }
  }

  &::before {
    content: '【';
  }
  &::after {
    content: '】';
  }
}
