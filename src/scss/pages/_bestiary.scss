@use '../common/vars' as *;
@use '../common/vars' as mixins;

@use 'bestiary/actions';
@use 'bestiary/affinities';
@use 'bestiary/attributes';
@use 'bestiary/defenses';
@use 'bestiary/bio';
@use 'bestiary/equipment';
@use 'bestiary/extras';
@use 'bestiary/other';
@use 'bestiary/points';
@use 'shared/shared';

.fabula-ultima {
  .bestiary {
    $this: '.bestiary';

    &--view {
      min-width: $breakpoint-xs;
      margin: 8px;
      max-width: 500px;
      background-color: var(--suface-container-lowest);

      box-shadow: var(--box-shadow-light);
      border-radius: 4px;

      display: flex;
      flex-direction: column;
      gap: 4px;

      * ~ .repcontrol {
        display: none;
      }

      .study {
        display: flex;
        align-items: center;
        gap: 4px;

        height: min-content;

        &__label {
          @include mixins.text-lg-500-fabula;
          text-transform: uppercase;
        }
        .chimera-value__label {
          margin-left: 4px;
        }
        &__roll {
          flex: 1;
        }
      }

      .bestiary {
        &__controls {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 4px;
          padding: 0 4px;

          .status-effects--view {
            grid-row: span 2;
          }
        }
      }
    }

    &--edit {
      min-width: $breakpoint-xxs;
      display: grid;
      gap: 8px;
      margin: 8px;

      padding: 8px;
      background-color: var(--bestiary-edit-background);

      > div {
        height: min-content;
      }

      @media (min-width: $breakpoint-sm) {
        grid-template-columns: repeat(4, 1fr);

        .bio--edit {
          grid-column: 1 / span 3;
        }

        .attributes {
          &--edit {
            grid-column-start: 1;
          }
          &__distribution {
            grid-column: span 3;
          }
        }

        .affinities {
          &--edit {
            grid-row: 3 / span 2;
          }
          &__skillcost {
            grid-column: span 3;
          }
        }

        .defenses--edit {
          grid-column: 2;
          align-self: flex-end;
        }
        .extras {
          grid-column: 3;
          align-self: flex-end;
        }
        .extra--checkboxes {
          grid-column: 4;
          align-self: flex-end;
        }

        .shield--edit,
        .weapons {
          grid-column: 3 / span 2;
        }

        .armor--edit,
        .basic-attacks {
          grid-column: 1 / span 2;
        }

        .spells {
          grid-column: 1/-1;
        }

        .other-actions,
        .special-rules,
        .rare-gears,
        .notes {
          grid-column: span 2;
        }
      }

      @media (max-width: $breakpoint-sm) {
        grid-template-columns: repeat(3, 1fr);

        .bio--edit {
          grid-column: 1/-1;
        }
        .attributes {
          // &--edit { }
          &__distribution {
            grid-column: span 2;
          }
        }
        .affinities {
          &__skillcost {
            grid-column: span 2;
          }
        }

        .defenses--edit,
        .extras,
        .extra--checkboxes {
          align-self: flex-end;
        }

        .shield--edit,
        .weapons,
        .armor--edit,
        .basic-attacks,
        .spells,
        .other-actions,
        .special-rules,
        .rare-gears,
        .notes {
          grid-column: 1/-1;
        }
      }

      @media (max-width: $breakpoint-xs) {
        .defenses--edit,
        .extras,
        .extra--checkboxes {
          grid-column: 1/-1;
        }
      }
    }
  }
}
